<img src="./icons/icon.svg" align="right" style="width: 6em; height: 6em;"></img>

# pURLfy

> ğŸ§¹ pURLfy, å–è‡ª "purify" å’Œ "URL" çš„ç»“åˆï¼Œæ„ä¸ºå‡€åŒ– URL é“¾æ¥ã€‚

[LiteLoaderQQNT](https://github.com/mo-jinran/LiteLoaderQQNT) æ’ä»¶ï¼Œç”¨äºå‡€åŒ– QQNT ä¸­çš„ URL é“¾æ¥ã€‚æ­¤æ’ä»¶çµæ„Ÿæ¥æºäº [Tarnhelm](https://tarnhelm.project.ac.cn/)ã€‚

## ğŸª„ å…·ä½“åŠŸèƒ½

- è‡ªåŠ¨å‡€åŒ–å°†è¦åœ¨æµè§ˆå™¨æ‰“å¼€çš„ URL é“¾æ¥ (`shell.openExternal`)
- ä¸´æ—¶ç¦ç”¨ï¼šåœ¨æ’ä»¶è®¾ç½®ä¸­å¯ä»¥ä¸´æ—¶ç¦ç”¨æ’ä»¶çš„å‡€åŒ–åŠŸèƒ½ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ—¶æ‰“å¼€åŸå§‹é“¾æ¥
- ç»Ÿè®¡æ•°æ®ï¼šå‡€åŒ–çš„é“¾æ¥æ•°é‡ã€å‡€åŒ–çš„å‚æ•°æ•°é‡ã€å‡€åŒ–çš„å­—ç¬¦æ•°é‡
    - \* ä»…åœ¨ç¨‹åºæ­£å¸¸é€€å‡ºæ—¶æ‰ä¼šä¿å­˜æ•°æ®

## ğŸ–¼ï¸ æˆªå›¾

![settings](./attachments/settings.jpg)

## ğŸ“¥ å®‰è£…

### æ’ä»¶å•†åº—

~~åœ¨æ’ä»¶å•†åº—ä¸­æ‰¾åˆ° pURLfy å¹¶å®‰è£…ã€‚~~

### æ‰‹åŠ¨å®‰è£…

- ç¨³å®šç‰ˆ: ä¸‹è½½ Release ä¸­çš„ `purlfy-release.zip`ï¼Œè§£å‹åæ”¾å…¥[æ•°æ®ç›®å½•](https://github.com/mo-jinran/LiteLoaderQQNT-Plugin-Template/wiki/1.%E4%BA%86%E8%A7%A3%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84#liteloader%E7%9A%84%E6%95%B0%E6%8D%AE%E7%9B%AE%E5%BD%95)ä¸‹çš„ `plugins/purlfy` æ–‡ä»¶å¤¹ä¸­å³å¯ã€‚(è‹¥æ²¡æœ‰è¯¥æ–‡ä»¶å¤¹è¯·è‡ªè¡Œåˆ›å»º)
- CI ç‰ˆ: è‹¥æƒ³ä½“éªŒæœ€æ–°çš„ CI åŠŸèƒ½ï¼Œå¯ä»¥ä¸‹è½½æºç ååŒä¸Šå®‰è£…ã€‚(ä»…éœ€ä¸‹è½½ä¸‹é¢åˆ—å‡ºçš„æ–‡ä»¶)

å®Œæˆåçš„ç›®å½•ç»“æ„åº”è¯¥å¦‚ä¸‹:

```
plugins (æ‰€æœ‰çš„æ’ä»¶ç›®å½•)
â””â”€â”€ purlfy (æ­¤æ’ä»¶ç›®å½•)
    â”œâ”€â”€ manifest.json (æ’ä»¶å…ƒæ•°æ®)
    â”œâ”€â”€ main.js (æ’ä»¶è„šæœ¬)
    â”œâ”€â”€ preload.js (æ’ä»¶è„šæœ¬)
    â”œâ”€â”€ renderer.js (æ’ä»¶è„šæœ¬)
    â”œâ”€â”€ rules.json (å‡€åŒ–è§„åˆ™)
    â”œâ”€â”€ settings.html (æ’ä»¶è®¾ç½®ç•Œé¢)
    â””â”€â”€ icons/ (æ’ä»¶ç”¨åˆ°çš„å›¾æ ‡)
```

## ğŸ¤” ä½¿ç”¨æ–¹æ³•

æ‰“å¼€æ’ä»¶åè‡ªåŠ¨ç”Ÿæ•ˆã€‚

## ğŸ“ƒ è§„åˆ™

> éƒ¨åˆ†è§„åˆ™æ¥æºäº [Tarnhelm](https://tarnhelm.project.ac.cn/rules.html)ã€‚

è§„åˆ™æ–‡ä»¶ `rules.json` çš„æ ¼å¼å¦‚ä¸‹:

```json
{
    "<domain>": {
        "<path>": {
            "description": "<è§„åˆ™æè¿°>",
            "mode": <æ¨¡å¼>,
            "params": ["<param 1>", "<param 2>", ...],
            "author": "<ä½œè€…>"
        }
    }
}
```

- `<domain>`, `<path>`: åŸŸåå’Œè·¯å¾„ï¼Œä¾‹å¦‚ `example.com/`, `path/to/page` (å»é™¤å‰é¢çš„ `/`)
    - è‹¥ä¸º `""`ï¼Œåˆ™è¡¨ç¤ºä½œä¸º **FallBack** è§„åˆ™ï¼šå½“æ­¤å±‚çº§æ²¡æœ‰åŒ¹é…åˆ°å…¶ä»–è§„åˆ™æ—¶ä½¿ç”¨æ­¤è§„åˆ™
    - è‹¥ä¸ä»¥ `/` ç»“å°¾ï¼Œè¡¨ç¤ºå…¶å€¼å°±æ˜¯ä¸€ä¸ªè§„åˆ™
    - è‹¥ä»¥ `/` ç»“å°¾ï¼Œè¡¨ç¤ºå…¶ä¸‹æœ‰æ›´å¤šå­è·¯å¾„ (å¯ä»¥å¤šçº§åµŒå¥—)
- `<æ¨¡å¼>`: è§„åˆ™æ¨¡å¼ï¼Œ`0` ä¸ºç™½åå•ï¼Œ`1` ä¸ºé»‘åå•~~ï¼Œ`2` ä¸ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œ`3` ä¸ºå–ç‰¹å®šå‚æ•°~~
- `<param n>`: å‚æ•°å

### è·¯å¾„åŒ¹é…

ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œè§„åˆ™æè¿°å†…ç»™å‡ºäº†å¯ä»¥åŒ¹é…çš„ç½‘å€:

```json
{
    "example.com/": {
        "a/b/c": {
            "description": "example.com/a/b/c",
            "mode": 0,
            "params": [],
            "author": "PRO-2684"
        },
        "path/": {
            "to/": {
                "page": {
                    "description": "example.com/path/to/page",
                    "mode": 0,
                    "params": [],
                    "author": "PRO-2684"
                },
                "": {
                    "description": "example.com/path/to",
                    "mode": 0,
                    "params": [],
                    "author": "PRO-2684"
                }
            }
        },
        "": {
            "description": "example.com/*",
            "mode": 0,
            "params": [],
            "author": "PRO-2684"
        }
    },
    "example.org": {
        "description": "example.org/*",
        "mode": 0,
        "params": [],
        "author": "PRO-2684"
    },
    "": {
        "description": "Fallback",
        "mode": 0,
        "params": [
            "utm_source",
            "utm_medium",
            "utm_campaign",
            "utm_term",
            "utm_content"
        ],
        "author": "PRO-2684"
    }
}
```

ä»¥ä¸‹æ˜¯***é”™è¯¯ç¤ºèŒƒ***:

```jsonc
{
    "example.com/": {
        "path/to/page/": { // ä»¥ `/` ç»“å°¾çš„ä¼šè¢«è®¤ä¸ºä¸‹é¢æœ‰å­è·¯å¾„ï¼Œæ­£ç¡®å†™æ³•æ˜¯æŠŠ `path/to/page/` æ”¹ä¸º `path/to/page`
            "description": "example.com/path/to/page",
            "mode": 0,
            "params": [],
            "author": "PRO-2684"
        }
    },
    "example.org": { // ä¸ä»¥ `/` ç»“å°¾çš„ä¼šè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªè§„åˆ™ï¼Œæ­£ç¡®å†™æ³•æ˜¯æŠŠ `example.org` æ”¹ä¸º `example.org/`
        "path/to/page": {
            "description": "example.com/path/to/page",
            "mode": 0,
            "params": [],
            "author": "PRO-2684"
        }
    }
}
```

### ç™½åå•æ¨¡å¼

ç™½åå•æ¨¡å¼ä¸‹ï¼Œåªæœ‰åœ¨ `params` ä¸­æŒ‡å®šçš„å‚æ•°æ‰ä¼šè¢«ä¿ç•™ï¼ŒåŸç½‘å€ä¸­çš„å…¶ä½™å‚æ•°ä¼šè¢«åˆ é™¤ã€‚

### é»‘åå•æ¨¡å¼

é»‘åå•æ¨¡å¼ä¸‹ï¼Œåœ¨ `params` ä¸­æŒ‡å®šçš„å‚æ•°å°†ä¼šè¢«åˆ é™¤ï¼ŒåŸç½‘å€ä¸­çš„å…¶ä½™å‚æ•°ä¼šè¢«ä¿ç•™ã€‚

### æ­£åˆ™è¡¨è¾¾å¼

æš‚æœªå®ç°ã€‚

### å–ç‰¹å®šå‚æ•°

æš‚æœªå®ç°ã€‚

## ğŸ’» è°ƒè¯•

Debug æ¨¡å¼ï¼šè‹¥æ‚¨æƒ³è¦è°ƒè¯•**æ­¤æ’ä»¶æœ¬èº«**ï¼Œå¯ä»¥ä½¿ç”¨ `--purlfy-debug` å‚æ•°å¯åŠ¨ QQNTï¼Œæ­¤æ—¶æ’ä»¶ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè°ƒè¯•ä¿¡æ¯ã€‚
